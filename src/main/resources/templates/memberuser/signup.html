<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
  <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</head>
<body>

  <form class="needs-validation" action="/memberuser/signup" method="post" th:object="${memberUserDTO}" novalidate>

    <div class="card mx-auto mt-3" style="width: 18rem;">

      <div class="card-body text-center">

        <h3>회원가입</h3>

        <div class="mb-3">
          <label for="exampleFormControlInput1" class="form-label">이름</label>
          <input type="text" class="form-control" name="name" th:field="*{name}" id="exampleFormControlInput1" placeholder="이름을 입력해주세요.">
          <div class="invalid-feedback">
            이름은 2~10자로 작성해주세요.
          </div>
        </div>

        <div class="mb-3">
          <label for="exampleFormControlInput1" class="form-label">이메일</label>
          <input type="email" class="form-control" name="email" th:field="*{email}" id="exampleFormControlInput2" placeholder="이메일을 입력해주세요.">
          <div class="invalid-feedback">
            이메일 형태로 최대 50자까지 작성해주세요.
          </div>
        </div>

        <div class="mb-3">
          <label for="exampleFormControlInput1" class="form-label">비밀번호</label>
          <input type="text" class="form-control" name="password" th:field="*{password}" id="exampleFormControlInput3" placeholder="비밀번호을 입력해주세요.">
          <div class="invalid-feedback">
            비밀번호는 8~20자로 작성해주세요.
          </div>
        </div>

        <div class="mb-3">
          <label for="exampleFormControlInput1" class="form-label">주소</label>
          <input type="text" class="form-control" name="address" th:field="*{address}" id="exampleFormControlInput4" placeholder="주소를 입력해주세요.">
          <div class="invalid-feedback">
            주소를 작성해주세요.
          </div>
        </div>

        <button type="submit" class="btn btn-secondary">회원가입</button>
        <button type="button" onclick="location.href='/memberuser/login'" class="btn btn-secondary">로그인</button>

      </div>
    </div>



  </form>

  <script th:inline="javascript">

    let isNameValid = false;
    let isEmailValid = false;
    let isPasswordValid = false;
    let isAddressValid = false;

    $("#exampleFormControlInput1").on("change", function () {
      let inputName = $(this).val();

      isNameValid = inputName.length >= 2 && inputName.length <= 10;

      if (isNameValid) {
        $(this).removeClass("is-invalid")
        $(this).addClass("is-valid")
      } else {
        $(this).removeClass("is-valid")
        $(this).addClass("is-invalid")
      }

    })

    $("#exampleFormControlInput2").on("change", function () {
      let inputEmail = $(this).val();



      isEmailValid = inputEmail.length <= 50;

      if (isEmailValid) {
        $(this).removeClass("is-invalid")
        $(this).addClass("is-valid")
      } else {
        $(this).removeClass("is-valid")
        $(this).addClass("is-invalid")
      }

    })

    $("#exampleFormControlInput3").on("change", function () {
      let inputPassword = $(this).val();

      isPasswordValid = inputPassword.length >= 8 && inputPassword.length <= 20;

      if (isPasswordValid) {
        $(this).removeClass("is-invalid")
        $(this).addClass("is-valid")
      } else {
        $(this).removeClass("is-valid")
        $(this).addClass("is-invalid")
      }

    })

    $("#exampleFormControlInput4").on("change", function () {
      let inputAddress = $(this).val();

      isAddressValid = inputAddress.length > 0;

      if (isAddressValid) {
        $(this).removeClass("is-invalid")
        $(this).addClass("is-valid")
      } else {
        $(this).removeClass("is-valid")
        $(this).addClass("is-invalid")
      }

    })



  </script>


</body>
</html>